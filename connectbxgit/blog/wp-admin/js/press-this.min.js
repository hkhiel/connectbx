!function(e,t){t.wp=t.wp||{},t.wp.pressThis=new function(){function s(e){return e&&t.pressThisL10n?t.pressThisL10n[e]||e:e||""}function a(e){return(e=e||"").replace(/<!--[\s\S]*?(-->|$)/g,"").replace(/<(script|style)[^>]*>[\s\S]*?(<\/\1>|$)/gi,"").replace(/<\/?[a-z][\s\S]*?(>|$)/gi,"")}function n(t){return t=e.trim(t||""),/^(?:https?:)?\/\//.test(t)?(t=a(t)).replace(/["\\]+/g,""):""}function i(e){var s;x&&!x.isHidden()||(e="reset"===e||q&&q>N.value.length,N.style.height,e?(s=t.pageYOffset,N.style.height="auto",N.style.height=Math.max(N.scrollHeight,I)+"px",t.scrollTo(t.pageXOffset,s)):parseInt(N.style.height,10)<N.scrollHeight&&(N.style.height=N.scrollHeight+"px"),q=N.value.length)}function o(e){var s=t.tinymce.util.VK,a=e.keyCode;a<=47&&a!==s.SPACEBAR&&a!==s.ENTER&&a!==s.DELETE&&a!==s.BACKSPACE&&a!==s.UP&&a!==s.LEFT&&a!==s.DOWN&&a!==s.UP||a>=91&&a<=93||a>=112&&a<=123||144===a||145===a||r(a)}function r(e){var s,a,n,i=function(){if(!x)return!1;var e,t,s,a=x.selection.getNode();if(x.wp&&x.wp.getView&&(t=x.wp.getView(a)))s=t.getBoundingClientRect();else{e=x.selection.getRng();try{s=e.getClientRects()[0]}catch(e){}s||(s=a.getBoundingClientRect())}return!!s.height&&s}(),o=t.tinymce.util.VK;i&&(a=(s=i.top+x.iframeElement.getBoundingClientRect().top)+i.height,s-=50,a+=65,(n=k.height())<i.height||(s<0&&(e===o.UP||e===o.LEFT||e===o.BACKSPACE)?t.scrollTo(t.pageXOffset,s+t.pageYOffset):a>n&&t.scrollTo(t.pageXOffset,a+t.pageYOffset-n)))}function c(){var t=e("#title-container");return t.find("img.emoji").each(function(){var t=e(this);t.replaceWith(e("<span>").text(t.attr("alt")))}),function(e){var s=a(t.text());try{O.innerHTML=s,s=a(O.value)}catch(e){}return s}()}function l(){var s=e("#pressthis-form"),a=e('<input type="hidden" name="post_category[]" value="">');x&&x.save(),e("#post_title").val(c()),t.tagBox&&e("div.tagsdiv").each(function(){t.tagBox.flushTags(this,!1,1)}),e(".categories-select .category").each(function(t,n){var i=e(n);i.hasClass("selected")&&s.append(a.clone().val(i.attr("data-term-id")||""))})}function d(a){var n;E=!1,e(".spinner").addClass("is-active"),e(".post-actions button").attr("disabled","disabled"),"publish"===a&&e("#post_status").val("publish"),l(),n=e("#pressthis-form").serialize(),e.ajax({type:"post",url:t.ajaxurl,data:n}).always(function(){e(".spinner").removeClass("is-active"),e(".post-actions button").removeAttr("disabled"),e("div.alerts").empty(),e(".publish-button").removeClass("is-saving")}).done(function(e){if(e.success){if(e.data.redirect)if(t.opener&&(A.redirInParent||e.data.force))try{t.opener.location.href=e.data.redirect,t.setTimeout(function(){t.self.close()},200)}catch(s){t.location.href=e.data.redirect}else t.location.href=e.data.redirect}else h(e.data.errorMessage)}).fail(function(){h(s("serverError"))})}function p(){var s,a=e("#new-category").val();a&&(s={action:"press-this-add-category",post_id:e("#post_ID").val()||0,name:a,new_cat_nonce:e("#_ajax_nonce-add-category").val()||"",parent:e("#new-category-parent").val()||0},e.post(t.ajaxurl,s,function(t){if(t.success){var s,a,n=e("ul.categories-select");e.each(t.data,function(t,i){var o=e("<li>").append(e('<div class="category selected" tabindex="0" role="checkbox" aria-checked="true">').attr("data-term-id",i.term_id).text(i.name));i.parent?(a&&a.length||(s=n.find('div[data-term-id="'+i.parent+'"]').parent(),(a=s.find("ul.children:first")).length||(a=e('<ul class="children">').appendTo(s))),a.prepend(o)):n.prepend(o),o.focus()}),b()}else h(t.data.errorMessage)}))}function u(t,s){var a=e(".editor-wrapper div.alerts"),n=s?"is-error":"is-notice";a.append(e('<p class="alert '+n+'">').text(t))}function h(e){u(e,!0)}function f(){var t=0;y=e("ul.media-list"),w=e('<li class="suggested-media-thumbnail" tabindex="0"><span class="screen-reader-text"></span></li>'),D._embeds&&e.each(D._embeds,function(e,a){var i="",o=w.clone().addClass("is-embed");(a=n(a)).indexOf("youtube.com/")>-1?i="https://i.ytimg.com/vi/"+a.replace(/.+v=([^&]+).*/,"$1")+"/hqdefault.jpg":a.indexOf("youtu.be/")>-1?i="https://i.ytimg.com/vi/"+a.replace(/\/([^\/])$/,"$1")+"/hqdefault.jpg":a.indexOf("dailymotion.com")>-1?i=a.replace("/video/","/thumbnail/video/"):a.indexOf("soundcloud.com")>-1||a.indexOf("twitter.com"),o.attr("data-wp-src",a).find("span").text(s("suggestedEmbedAlt").replace("%d",e+1)),i&&o.css("background-image","url("+i+")"),y.append(o),t++}),D._images&&e.each(D._images,function(e,a){var i,o=new Image;a=n(a),i=a.replace(/^(http[^\?]+)(\?.*)?$/,"$1"),i=a.indexOf("files.wordpress.com/")>-1?i.replace(/\?.*$/,"")+"?w="+P:a.indexOf("gravatar.com/")>-1?i.replace(/\?.*$/,"")+"?s="+P:a,o.onload=function(){o.width&&o.width<256||o.height&&o.height<128||function(e,t,a){var n=w.clone().addClass("is-image");n.attr("data-wp-src",e).css("background-image","url("+t+")").find("span").text(s("suggestedImgAlt").replace("%d",a+1)),y.append(n)}(a,i,e)},o.src=a,t++}),t&&e(".media-list-container").addClass("has-media")}function g(){_=!1,e(".options").removeClass("open").addClass("closed"),e(".options-panel-back").addClass($),e(".press-this-actions, #scanbar").removeClass($),e(".options-panel").addClass(S).one(z,function(){e(this).addClass($),e(".post-options").removeClass(j),e(".setting-modal").addClass(j)})}function m(){e(".split-button").removeClass("is-open"),e(".split-button-toggle").attr("aria-expanded","false")}function v(){D.hasData&&e("#scanbar").hide(),f(),D.errors&&e.each(D.errors,function(e,t){h(t)}),t.tagBox&&t.tagBox.init(),L&&e(document.body).css("cursor","pointer")}function C(){var a=e(".split-button");return T.on("tinymce-editor-init",function(e,t){(x=t).on("nodechange",function(){B=!0}),x.on("focus",function(){m()}),x.on("show",function(){setTimeout(function(){x.execCommand("wpAutoResize")},300)}),x.on("hide",function(){setTimeout(function(){i("reset")},100)}),x.on("keyup",o),x.on("undo redo",r)}).on("click.press-this keypress.press-this",".suggested-media-thumbnail",function(s){"click"!==s.type&&13!==s.keyCode||function(e){var s,a,i="";s=n(e.attr("data-wp-src")||""),a=n(D.u),e.hasClass("is-image")?(a||(a=s),i='<a href="'+a+'"><img class="alignnone size-full" src="'+s+'" alt="" /></a>'):i="[embed]"+s+"[/embed]",x&&!x.isHidden()?B?x.execCommand("mceInsertContent",!1,i):x.setContent("<p>"+i+"</p>"+x.getContent()):t.QTags&&t.QTags.insertContent(i)}(e(this))}).on("click.press-this",function(t){e(t.target).closest("button").hasClass("split-button-toggle")||m()}),e(".post-actions").on("click.press-this",function(s){var n,i=e(s.target).closest("button");i.length&&(i.hasClass("draft-button")?(e(".publish-button").addClass("is-saving"),d("draft")):i.hasClass("publish-button")?(i.addClass("is-saving"),t.history.replaceState&&(n=t.location.href,n+=-1!==n.indexOf("?")?"&":"?",n+="wp-press-this-reload=true",t.history.replaceState(null,null,n)),d("publish")):i.hasClass("preview-button")?(l(),t.opener&&t.opener.focus(),e("#wp-preview").val("dopreview"),e("#pressthis-form").attr("target","_blank").submit().attr("target",""),e("#wp-preview").val("")):i.hasClass("standard-editor-button")?(e(".publish-button").addClass("is-saving"),e("#pt-force-redirect").val("true"),d("draft")):i.hasClass("split-button-toggle")&&(a.hasClass("is-open")?(a.removeClass("is-open"),i.attr("aria-expanded","false")):(a.addClass("is-open"),i.attr("aria-expanded","true"))))}),function(){var t=e(".post-options"),s=e(".post-option"),a=e(".setting-modal"),n=e(".modal-close");s.on("click",function(){var s=e(this).index(),n=a.eq(s);t.addClass(S).one(z,function(){e(this).addClass($)}),n.removeClass(j).one(z,function(){e(this).find(".modal-close").focus()})}),n.on("click",function(){var a=e(this).parent(),n=a.index();t.removeClass(j),a.addClass(S),z?a.one(z,function(){e(this).addClass($),s.eq(n-1).focus()}):setTimeout(function(){a.addClass($),s.eq(n-1).focus()},350)})}(),function(){var s=e("#title-container"),a=e(".post-title-placeholder");s.on("focus",function(){a.addClass("is-hidden")}).on("blur",function(){s.text()||s.html()||a.removeClass("is-hidden")}).on("keyup",function(){E=!0}).on("paste",function(a){var n,i,o=a.originalEvent.clipboardData||t.clipboardData;if(o){try{(n=o.getData("Text")||o.getData("text/plain"))&&(n=e.trim(n.replace(/\s+/g," ")),t.getSelection?(i=t.getSelection().getRangeAt(0))&&(i.collapsed||i.deleteContents(),i.insertNode(document.createTextNode(n))):document.selection&&(i=document.selection.createRange())&&(i.text=n))}catch(e){}a.preventDefault()}E=!0,setTimeout(function(){s.text(c())},50)}),(s.text()||s.html())&&a.addClass("is-hidden")}(),e(".categories-select").on("click.press-this keydown.press-this",function(t){var s=e(t.target);if(s.is("div.category")){if("keydown"===t.type&&32!==t.keyCode)return;!function(e){e.hasClass("selected")?e.removeClass("selected").attr("aria-checked","false"):e.addClass("selected").attr("aria-checked","true")}(s),t.preventDefault()}}),e(".options").on("click.press-this",function(){e(this).hasClass("open")?g():(_=!0,e(".options").removeClass("closed").addClass("open"),e(".press-this-actions, #scanbar").addClass($),e(".options-panel-back").removeClass($),e(".options-panel").removeClass(j).one(z,function(){e(".post-option:first").focus()}))}),e(".options-panel, .options-panel-back").on("focusout.press-this",function(){setTimeout(function(){var t=document.activeElement,s=e(t);!_||!t||s.hasClass("options-panel-back")||"BODY"!==t.nodeName&&(s.closest(".options-panel").length||s.closest(".options").length)||g()},50)}),e("#post-formats-select input").on("change",function(){var t=e(this);t.is(":checked")&&e("#post-option-post-format").text(e('label[for="'+t.attr("id")+'"]').text()||"")}),k.on("beforeunload.press-this",function(){if(E||x&&x.isDirty())return s("saveAlert")}).on("resize.press-this",function(){x&&!x.isHidden()||i("reset")}),e("button.add-cat-toggle").on("click.press-this",function(){var t=e(this);t.toggleClass("is-toggled"),t.attr("aria-expanded","false"===t.attr("aria-expanded")?"true":"false"),e(".setting-modal .add-category, .categories-search-wrapper").toggleClass("is-hidden")}),e("button.add-cat-submit").on("click.press-this",p),e(".categories-search").on("keyup.press-this",function(){var t=e(this).val().toLowerCase()||"";/[\x20-\xFF]+/.test(t)&&t.length<2||(e.each(R,function(e,t){t.node.removeClass("is-hidden searched-parent")}),t&&e.each(R,function(e,s){-1===s.text.indexOf(t)?s.node.addClass("is-hidden"):s.parents.addClass("searched-parent")}))}),H.on("focus.press-this input.press-this propertychange.press-this",i),!0}function b(){e(".categories-select").find("li").each(function(){var t=e(this);R.push({node:t,parents:t.parents("li"),text:t.children(".category").text().toLowerCase()})})}var x,y,w,k=e(t),T=e(document),E=!1,O=document.createElement("textarea"),_=!1,A=t.wpPressThisConfig||{},D=t.wpPressThisData||{},P=128,B=!1,R=[],S="is-off-screen",$="is-hidden",j=S+" "+$,L=/iPad|iPod|iPhone/.test(t.navigator.userAgent),H=e("#pressthis"),N=H[0],I=600,q=0,z=function(){var e=document.documentElement.style;return void 0!==e.transition?"transitionend":void 0!==e.WebkitTransition&&"webkitTransitionEnd"}();return T.ready(function(){v(),C(),b()}),{renderNotice:u,renderError:h}}}(jQuery,window);